
@{
    ViewBag.Title = "Alinan";
    Layout = "~/Views/Shared/FirmaLayout.cshtml";
    int i = 0;
}

<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
    body {
        font-family: Arial;
    }

    /* Style the tab */
    .tab {
        overflow: hidden;
        border: 1px solid #ccc;
        background-color: #f1f1f1;
    }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

            /* Change background color of buttons on hover */
            .tab button:hover {
                background-color: #ddd;
            }

            /* Create an active/current tablink class */
            .tab button.active {
                background-color: #ccc;
            }

    /* Style the tab content */
    .tabcontent {
        display: none;
        padding: 6px 12px;
        border: 1px solid #ccc;
        border-top: none;
    }
</style>
<style>
    table {
        border-collapse: collapse;
        border-spacing: 0;
        width: 100%;
        border: 1px solid #ddd;
    }

    th, td {
        text-align: left;
        padding: 16px;
    }

    tr:nth-child(even) {
        background-color: #e9e8eb;
    }


    /* Style inputs with type="text", select elements and textareas */
    input[type=text], select, textarea {
        width: 100%; /* Full width */
        padding: 12px; /* Some padding */
        border: 1px solid #ccc; /* Gray border */
        border-radius: 4px; /* Rounded borders */
        box-sizing: border-box; /* Make sure that padding and width stays in place */
        margin-top: 6px; /* Add a top margin */
        margin-bottom: 16px; /* Bottom margin */
        resize: vertical /* Allow the user to vertically resize the textarea (not horizontally) */
    }

    /* Style the submit button with a specific background color etc */
    input[type=submit] {
        background-color: #04AA6D;
        color: white;
        padding: 12px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .tr {
        border-bottom: 1px solid #ddd;
        background-color: #e9e8eb;
        font-size: 12px;
    }

    /* Add a background color and some padding around the form */


    .btn {
        border: 2px solid black;
        background-color: white;
        color: black;
        padding: 14px 28px;
        font-size: 16px;
        cursor: pointer;
    }

    /* Green */
    .success {
        border-color: #04AA6D;
        color: green;
    }

        .success:hover {
            background-color: #04AA6D;
            color: white;
        }
</style>

<style>
    body {
        font-family: Arial, Helvetica, sans-serif;
    }

    /* The Modal (background) */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
        position: relative;
        background-color: #fefefe;
        margin: auto;
        padding: 0;
        border: 1px solid #888;
        width: 80%;
        box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
        -webkit-animation-name: animatetop;
        -webkit-animation-duration: 0.4s;
        animation-name: animatetop;
        animation-duration: 0.4s
    }

    /* Add Animation */
    @@-webkit-keyframes animatetop {
        from {
            top: -300px;
            opacity: 0
        }

        to {
            top: 0;
            opacity: 1
        }
    }

    @@keyframes animatetop {
        from {
            top: -300px;
            opacity: 0
        }

        to {
            top: 0;
            opacity: 1
        }
    }

    /* The Close Button */
    .close {
        color: white;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

        .close:hover,
        .close:focus {
            color: red;
            text-decoration: none;
            cursor: pointer;
        }

    .modal-header {
        padding: 2px 16px;
        background-color: #1f3646;
        color: white;
    }

    .modal-body {
        padding: 2px 16px;
    }

    .modal-footer {
        padding: 2px 16px;
        background-color: #1f3646;
        color: white;
    }
</style>
<div id="myModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
        <div id="Dbaslik" class="modal-header">
            <span class="close">&times;</span>
            <h2 id="Mbaslik"></h2>
        </div>
        <div class="modal-body">
            <div id="Micerik"></div>
        </div>
        <div id="Dfoter" class="modal-footer">
            <h3 style="text-align:left" id="Mfoter"></h3>
        </div>
    </div>

</div>
<div class="tab">
    <button class="tablinks" onclick="openCity(event, 'Rezervasyon')" id="defaultOpen">Rezervasyonlar</button>
    <button class="tablinks" onclick="openCity(event, 'SatinAl')">Satın Alınanlar</button>
</div>

<div id="Rezervasyon" class="tabcontent">
    <div>
        <h2 style="text-align:center;background-color:#4b43ff;color:white">REZERVE EDİLEN BİLET LİSTESİ</h2>
        <table>
            <thead>
                <tr class="tr">
                    <th style="text-align:center">
                        <b>NO</b>
                    </th>
                    <th style="text-align:center">
                        <b>MÜŞTERİ ADI</b>
                    </th>
                    <th style="text-align:center">
                        <b>MÜŞTERİ SOYADI</b>
                    </th>
                    <th style="text-align:center">
                        <b>TELEFON</b>
                    </th>
                    <th style="text-align:center">
                        <b>KALKIŞ</b>
                    </th>
                    <th style="text-align:center">
                        <b>VARIŞ</b>
                    </th>
                    <th style="text-align:center">
                        <b>KOLTUK NO</b>
                    </th>
                    <th style="text-align:center">
                        <b>TARIH</b>
                    </th>
                    <th style="text-align:center">
                        <b>SAAT</b>
                    </th>
                    <th style="text-align:center">
                        <b>SEFER BİLGİ</b>
                    </th>
                    <th style="text-align:center">
                        <b>TAŞIT BİLGİ</b>
                    </th>
                    <th style="text-align:center">
                        <b>İPTAL ET</b>
                    </th>
                </tr>
            </thead>
            <tbody id="MusteriListe">
                @if (ViewBag.RezerveListesi != null)
                {
                    i = 0;
                    foreach (var item in ViewBag.RezerveListesi)
                    {
                        i++;
                        <tr>
                            <td style="text-align:center">@i)</td>
                            <td style="text-align:center">@item.ADI</td>
                            <td style="text-align:center">@item.SOYADI</td>
                            <td style="text-align:center">@item.TEL</td>
                            <td style="text-align:center">@item.KALKIS</td>
                            <td style="text-align:center">@item.VARIS</td>
                            <td style="text-align:center">@item.KOLTUK</td>
                            <td style="text-align:center">@item.TARIH</td>
                            <td style="text-align:center">@item.SAAT</td>
                            <th style="text-align:center"><input class="btn btn-primary" type="button" id="@item.SEFERID" onclick="Sefer(this.id)" value="Sefer Bilgisi" /></th>
                            <th style="text-align:center"><input class="btn btn-success" type="button" id="@item.TASITID" onclick="Tasit(this.id)" value="Taşıt Bilgisi" /></th>
                            <th style="text-align:center"><input class="btn btn-danger" type="button" id="@item.ID" onclick="Reziptal(this.id)" value="Rezervasyonu İptal Et" /></th>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>

<div id="SatinAl" class="tabcontent">
    <div>
        <h2 style="text-align:center;background-color:#04AA6D;color:white">SATIN ALINAN BİLET LİSTESİ</h2>
        <table>
            <thead>
                <tr class="tr">
                    <th style="text-align:center">
                        <b>NO</b>
                    </th>
                    <th style="text-align:center">
                        <b>MÜŞTERİ ADI</b>
                    </th>
                    <th style="text-align:center">
                        <b>MÜŞTERİ SOYADI</b>
                    </th>
                    <th style="text-align:center">
                        <b>TELEFON</b>
                    </th>
                    <th style="text-align:center">
                        <b>KALKIŞ</b>
                    </th>
                    <th style="text-align:center">
                        <b>VARIŞ</b>
                    </th>
                    <th style="text-align:center">
                        <b>KOLTUK NO</b>
                    </th>
                    <th style="text-align:center">
                        <b>TARIH</b>
                    </th>
                    <th style="text-align:center">
                        <b>SAAT</b>
                    </th>
                    <th style="text-align:center">
                        <b>SEFER BİLGİ</b>
                    </th>
                    <th style="text-align:center">
                        <b>TAŞIT BİLGİ</b>
                    </th>
                </tr>
            </thead>
            <tbody id="MusteriListe">
                @if (ViewBag.SatinListesi != null)
                {
                    i = 0;
                    foreach (var item in ViewBag.SatinListesi)
                    {
                        i++;
                        <tr>
                            <td style="text-align:center">@i)</td>
                            <td style="text-align:center">@item.ADI</td>
                            <td style="text-align:center">@item.SOYADI</td>
                            <td style="text-align:center">@item.TEL</td>
                            <td style="text-align:center">@item.KALKIS</td>
                            <td style="text-align:center">@item.VARIS</td>
                            <td style="text-align:center">@item.KOLTUK</td>
                            <td style="text-align:center">@item.TARIH</td>
                            <td style="text-align:center">@item.SAAT</td>
                            <th style="text-align:center"><input class="btn btn-primary" type="button" id="@item.SEFERID" onclick="Sefer(this.id)" value="Sefer Bilgisi" /></th>
                            <th style="text-align:center"><input class="btn btn-success" type="button" id="@item.TASITID" onclick="Tasit(this.id)" value="Taşıt Bilgisi" /></th>
                        </tr>
                    }
                }
            </tbody>
        </table>
    </div>
</div>

<script>
    function openCity(evt, cityName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(cityName).style.display = "block";
        evt.currentTarget.className += " active";
    }
    document.getElementById("defaultOpen").click();
</script>



<script>
    function Sefer(al) {

        $.ajax({
            type: 'POST',
            url: '/Home/SeferGetir',
            dataType: 'json',
            data: "?&ID=" + al,
            success: function (cevap) {

                var l = cevap.length;
                if (l > 0) {
                    var modal = document.getElementById("myModal");
                    document.getElementById("Mbaslik").innerHTML = cevap[0].SEFERSAYISI + " Sefer Numaralı Seyehat Planı.";
                    document.getElementById("Micerik").innerHTML = "<h4><b>Kalkış Konumu: </b>" + cevap[0].KALKIS + "</h4><h4><b>Varış Konumu: </b>" + cevap[0].VARIS + "</h4><h4><b>Seyehat Tarihi: </b>" + cevap[0].TARIH + "</h4><h4><b>Seyehat Saati: </b>" + cevap[0].SAAT + "</h4><h4><b>Seyehat Fiyat Bilgisi: </b>" + cevap[0].FIYAT + "</h4>";
                    document.getElementById("Mfoter").innerHTML = "Esen Seyehat Rezervasyon Satın Alma Hizmetleri";
                    // Get the button that opens the modal
                    document.getElementById("Dbaslik").style.backgroundColor = "#1f3646";
                    // Get the <span> element that closes the modal
                    var span = document.getElementsByClassName("close")[0];
                    modal.style.display = "block";

                    // When the user clicks on <span> (x), close the modal
                    span.onclick = function () {
                        modal.style.display = "none";
                    }

                    // When the user clicks anywhere outside of the modal, close it
                    window.onclick = function (event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    }
                }
                else {
                    alert("Sefer Bilgisi Alınamadı.")
                }

            }
        });
    }
    function Tasit(al) {

        $.ajax({
            type: 'POST',
            url: '/Home/TasitGetir',
            dataType: 'json',
            data: "?&ID=" + al,
            success: function (cevap) {

                var l = cevap.length;
                if (l > 0) {
                    var modal = document.getElementById("myModal");
                    document.getElementById("Mbaslik").innerHTML = cevap[0].AD + " Adlı Taşıt Bilgisi.";
                    document.getElementById("Micerik").innerHTML = "<h4><b>Firma Ünvanı: </b>" + cevap[0].FIRMA + "</h4><h4><b>Taşıt Tipi: </b>" + cevap[0].TIP + "</h4><h4><b>Taşıt Adı: </b>" + cevap[0].AD + "</h4><h4><b>Toplam Koltuk Sayısı: </b>" + cevap[0].KOLTUK + "</h4>";
                    document.getElementById("Mfoter").innerHTML = "Esen Seyehat Rezervasyon Satın Alma Hizmetleri";
                    // Get the button that opens the modal
                    document.getElementById("Dbaslik").style.backgroundColor = "#1f3646";
                    // Get the <span> element that closes the modal
                    var span = document.getElementsByClassName("close")[0];
                    modal.style.display = "block";

                    // When the user clicks on <span> (x), close the modal
                    span.onclick = function () {
                        modal.style.display = "none";
                    }

                    // When the user clicks anywhere outside of the modal, close it
                    window.onclick = function (event) {
                        if (event.target == modal) {
                            modal.style.display = "none";
                        }
                    }
                }
                else {
                    alert("Sefer Bilgisi Alınamadı.")
                }

            }
        });
    }
    function Reziptal(al) {
        $.ajax({
            type: 'POST',
            url: '/Home/RezervasyonIptal',
            dataType: 'json',
            data: "?&ID=" + al,
            success: function (cevap) {
                document.location.reload(true);
            }
        });
    }
</script>

